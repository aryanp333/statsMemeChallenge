<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aryan Pagdaloo">

<title>Selection Bias &amp; Missing Data Challenge - Part 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#selection-bias-missing-data-challenge---part-2" id="toc-selection-bias-missing-data-challenge---part-2" class="nav-link active" data-scroll-target="#selection-bias-missing-data-challenge---part-2">üé® Selection Bias &amp; Missing Data Challenge - Part 2</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-problem-visualizing-selection-bias" id="toc-the-problem-visualizing-selection-bias" class="nav-link" data-scroll-target="#the-problem-visualizing-selection-bias">The Problem: Visualizing Selection Bias</a>
  <ul class="collapse">
  <li><a href="#the-visual-approach" id="toc-the-visual-approach" class="nav-link" data-scroll-target="#the-visual-approach">The Visual Approach</a></li>
  </ul></li>
  <li><a href="#why-this-matters" id="toc-why-this-matters" class="nav-link" data-scroll-target="#why-this-matters">Why This Matters</a>
  <ul class="collapse">
  <li><a href="#the-power-of-visual-learning" id="toc-the-power-of-visual-learning" class="nav-link" data-scroll-target="#the-power-of-visual-learning">The Power of Visual Learning</a></li>
  <li><a href="#the-ai-collaboration-model" id="toc-the-ai-collaboration-model" class="nav-link" data-scroll-target="#the-ai-collaboration-model">The AI Collaboration Model</a></li>
  </ul></li>
  <li><a href="#the-statistics-meme-a-visual-demonstration" id="toc-the-statistics-meme-a-visual-demonstration" class="nav-link" data-scroll-target="#the-statistics-meme-a-visual-demonstration">The Statistics Meme: A Visual Demonstration</a></li>
  <li><a href="#understanding-selection-bias-through-visualization" id="toc-understanding-selection-bias-through-visualization" class="nav-link" data-scroll-target="#understanding-selection-bias-through-visualization">Understanding Selection Bias Through Visualization</a>
  <ul class="collapse">
  <li><a href="#the-four-panels-a-detailed-breakdown" id="toc-the-four-panels-a-detailed-breakdown" class="nav-link" data-scroll-target="#the-four-panels-a-detailed-breakdown">The Four Panels: A Detailed Breakdown</a></li>
  <li><a href="#why-selection-bias-matters-in-real-statistics" id="toc-why-selection-bias-matters-in-real-statistics" class="nav-link" data-scroll-target="#why-selection-bias-matters-in-real-statistics">Why Selection Bias Matters in Real Statistics</a></li>
  <li><a href="#the-visual-metaphor-as-a-learning-tool" id="toc-the-visual-metaphor-as-a-learning-tool" class="nav-link" data-scroll-target="#the-visual-metaphor-as-a-learning-tool">The Visual Metaphor as a Learning Tool</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Selection Bias &amp; Missing Data Challenge - Part 2</h1>
<p class="subtitle lead">Creating a Statistics Meme: Visualizing Selection Bias</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aryan Pagdaloo </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="selection-bias-missing-data-challenge---part-2" class="level1">
<h1>üé® Selection Bias &amp; Missing Data Challenge - Part 2</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Welcome to Part 2 of the Selection Bias &amp; Missing Data Challenge. This project demonstrates how <strong>selection bias</strong>‚Äîone of the most critical problems in statistical analysis‚Äîcan be visualized and understood through a creative, memorable four-panel meme. By transforming abstract statistical concepts into visual representations, we create a powerful tool for understanding how biased sampling can distort our understanding of reality.</p>
</section>
<section id="the-problem-visualizing-selection-bias" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-visualizing-selection-bias">The Problem: Visualizing Selection Bias</h2>
<p><strong>Selection bias</strong> occurs when the process of selecting observations for analysis systematically excludes certain groups, regions, or types of data, leading to a sample that doesn‚Äôt accurately represent the population of interest. This fundamental problem affects research across disciplines‚Äîfrom medical studies to social surveys, from historical analysis to market research.</p>
<section id="the-visual-approach" class="level3">
<h3 class="anchored" data-anchor-id="the-visual-approach">The Visual Approach</h3>
<p>To make this abstract concept tangible, we use a four-panel visualization where:</p>
<ul>
<li><strong>Reality</strong> represents the true population‚Äîthe complete, unbiased truth we‚Äôre trying to understand</li>
<li><strong>Your Model</strong> represents our sample‚Äîa simplified but systematic representation of reality</li>
<li><strong>Selection Bias</strong> represents the systematic pattern of missing data‚Äîvisualized as a bold letter ‚ÄúS‚Äù</li>
<li><strong>Estimate</strong> represents the biased conclusion we‚Äôd draw from incomplete data‚Äîshowing what happens when selection bias affects our analysis</li>
</ul>
<p><strong>The Core Concept:</strong> Images are simply matrices‚Äî2D arrays where each value represents a pixel (0.0 = black, 1.0 = white). Your stippled image is a matrix with black dots (data points) on a white background. Selection bias removes some of these pixels (data points) in a systematic pattern (the ‚ÄúS‚Äù), creating a biased estimate that doesn‚Äôt reflect the true population.</p>
<p>This visualization makes the invisible visible: you can literally <strong>see</strong> what‚Äôs missing, making it easier to recognize and address selection bias in real-world scenarios.</p>
</section>
</section>
<section id="why-this-matters" class="level2">
<h2 class="anchored" data-anchor-id="why-this-matters">Why This Matters</h2>
<p>This exercise represents a new paradigm in statistical education: <strong>collaborating with AI to transform abstract concepts into memorable visual artifacts</strong>. You‚Äôre not just coding‚Äîyou‚Äôre engaging in a creative process that combines human understanding with computational power to produce work that would have previously required years of specialized training.</p>
<section id="the-power-of-visual-learning" class="level3">
<h3 class="anchored" data-anchor-id="the-power-of-visual-learning">The Power of Visual Learning</h3>
<p>The meme you create serves as a <strong>mental anchor</strong>‚Äîa visual memory that will persist throughout your career. Whenever you encounter data analysis in the future, this visualization will prompt you to ask the critical question: <strong>‚ÄúDoes my sample match my population of interest?‚Äù</strong></p>
<p>Research in cognitive psychology shows that visual metaphors and memorable images significantly improve retention and understanding of complex concepts. By creating this visualization yourself, you‚Äôre building neural pathways that connect the abstract concept of selection bias with a concrete, visual representation. This connection makes it easier to:</p>
<ul>
<li><strong>Recognize</strong> selection bias in real-world scenarios</li>
<li><strong>Explain</strong> the problem to others using the visual metaphor</li>
<li><strong>Address</strong> bias in your own research and analysis</li>
<li><strong>Remember</strong> the concept long after the assignment is complete</li>
</ul>
</section>
<section id="the-ai-collaboration-model" class="level3">
<h3 class="anchored" data-anchor-id="the-ai-collaboration-model">The AI Collaboration Model</h3>
<p>This project demonstrates how modern AI tools can amplify human capability. Rather than spending weeks learning complex image processing algorithms, you‚Äôre able to focus on understanding the <strong>conceptual framework</strong> while AI handles the technical implementation. This represents a shift from traditional education models toward a more efficient, collaborative approach where:</p>
<ul>
<li><strong>You provide</strong>: Conceptual understanding, critical thinking, and creative direction</li>
<li><strong>AI provides</strong>: Technical implementation, code generation, and computational power</li>
<li><strong>Together you create</strong>: Professional-quality work that demonstrates deep understanding</li>
</ul>
<p>This is the future of statistical education: focusing on awareness and understanding while leveraging technology for execution.</p>
</section>
</section>
<section id="the-statistics-meme-a-visual-demonstration" class="level2">
<h2 class="anchored" data-anchor-id="the-statistics-meme-a-visual-demonstration">The Statistics Meme: A Visual Demonstration</h2>
<p>The centerpiece of this project is a four-panel statistics meme that visually demonstrates selection bias through a clear, memorable metaphor. Each panel tells part of the story, working together to create a comprehensive understanding of how selection bias distorts our view of reality.</p>
<div class="quarto-figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="statistics_meme_result.png" class="img-fluid figure-img"></p>
<figcaption>Four-panel statistics meme showing Reality (original image), Your Model (stippled version), Selection Bias (letter S), and Estimate (masked stippled image). The meme demonstrates how systematic missing data creates a biased estimate that doesn‚Äôt represent the true population.</figcaption>
</figure>
</div>
<p><strong>Figure 1:</strong> The four-panel statistics meme visualizing selection bias. From left to right: Reality (true population), Your Model (systematic sample), Selection Bias (systematic missing data pattern), and Estimate (biased conclusion based on incomplete data).</p>
</div>
<p>This visualization was created using Python and image processing libraries, combining the original photograph with a stippled representation generated using blue noise stippling algorithms from Part 1 of this challenge. The code ensures precise alignment, proper masking, and professional presentation quality.</p>
</section>
<section id="understanding-selection-bias-through-visualization" class="level2">
<h2 class="anchored" data-anchor-id="understanding-selection-bias-through-visualization">Understanding Selection Bias Through Visualization</h2>
<p>This four-panel meme demonstrates the concept of <strong>selection bias</strong> in statistics through a visual metaphor that makes abstract statistical concepts tangible and memorable. By seeing the problem visually, we can better understand its implications and recognize it in real-world scenarios.</p>
<section id="the-four-panels-a-detailed-breakdown" class="level3">
<h3 class="anchored" data-anchor-id="the-four-panels-a-detailed-breakdown">The Four Panels: A Detailed Breakdown</h3>
<section id="panel-1-reality-the-true-population" class="level4">
<h4 class="anchored" data-anchor-id="panel-1-reality-the-true-population">Panel 1: Reality ‚Äî The True Population</h4>
<p>This panel represents the <strong>true population</strong>‚Äîyour original image showing the complete, unbiased truth. In statistical terms, this is the full population we want to understand: every detail is present, nothing is missing, and the representation is complete.</p>
<p><strong>Statistical Interpretation:</strong> - This is the <strong>parameter</strong> we‚Äôre trying to estimate - It represents the ground truth against which all samples are compared - In research, this would be the ideal dataset that includes all relevant observations - Every pixel (data point) is accounted for, providing a complete picture</p>
<p><strong>Why It Matters:</strong> Without understanding what the true population looks like, we can‚Äôt recognize when our sample is biased. This panel serves as the baseline‚Äîthe standard against which we measure the accuracy of our estimates.</p>
</section>
<section id="panel-2-your-model-the-systematic-sample" class="level4">
<h4 class="anchored" data-anchor-id="panel-2-your-model-the-systematic-sample">Panel 2: Your Model ‚Äî The Systematic Sample</h4>
<p>This panel shows your <strong>stippled representation</strong>‚Äîa model of reality created through systematic sampling using blue noise stippling algorithms. The black dots represent your <strong>data points</strong> or observations, carefully distributed to capture the essential structure and visual information of the original image.</p>
<p><strong>Statistical Interpretation:</strong> - This represents your <strong>sample</strong>‚Äîa subset of the population - The stippling process mimics systematic sampling methods used in research - While simplified, it captures the essential structure of the population - In ideal circumstances, this sample would be representative and unbiased</p>
<p><strong>The Sampling Process:</strong> The blue noise stippling algorithm ensures that dots are distributed according to importance (darker areas get more dots) while maintaining spatial uniformity. This mirrors how good sampling strategies work: they capture important variation while ensuring even coverage.</p>
<p><strong>Why It Matters:</strong> This panel demonstrates that even a well-designed sample is still a simplification. The challenge is ensuring that this simplification doesn‚Äôt systematically exclude important information.</p>
</section>
<section id="panel-3-selection-bias-the-systematic-missing-data-pattern" class="level4">
<h4 class="anchored" data-anchor-id="panel-3-selection-bias-the-systematic-missing-data-pattern">Panel 3: Selection Bias ‚Äî The Systematic Missing Data Pattern</h4>
<p>The bold letter ‚ÄúS‚Äù represents a <strong>systematic pattern of missing data</strong>‚Äîthe core of selection bias. This is not random missing data, but a <strong>patterned absence</strong> that follows a specific structure. The ‚ÄúS‚Äù shape visually demonstrates how selection bias creates systematic gaps in our data.</p>
<p><strong>Types of Selection Bias Represented:</strong> - <strong>Geographic Bias</strong>: Certain regions not sampled (like the ‚ÄúS‚Äù excludes those areas) - <strong>Demographic Bias</strong>: Certain groups excluded from the sample - <strong>Temporal Bias</strong>: Certain time periods missing from the data - <strong>Response Bias</strong>: Certain types of responses not collected - <strong>Volunteer Bias</strong>: Only certain types of participants included</p>
<p><strong>Statistical Interpretation:</strong> - The ‚ÄúS‚Äù represents the <strong>selection mechanism</strong> that determines which observations are included - This mechanism is not random‚Äîit follows a pattern (hence the visible ‚ÄúS‚Äù) - The pattern creates systematic gaps that distort our understanding - These gaps are predictable and follow a structure, making them particularly dangerous</p>
<p><strong>Why It Matters:</strong> Selection bias is insidious because it‚Äôs systematic. Unlike random error, which averages out, systematic bias compounds and leads to consistently wrong conclusions.</p>
</section>
<section id="panel-4-estimate-the-biased-conclusion" class="level4">
<h4 class="anchored" data-anchor-id="panel-4-estimate-the-biased-conclusion">Panel 4: Estimate ‚Äî The Biased Conclusion</h4>
<p>This panel shows what you‚Äôd see if selection bias affected your model‚Äîthe <strong>biased estimate</strong> based on incomplete data. Notice how the ‚ÄúS‚Äù-shaped region has no data points‚Äîthe stipples have been removed, creating a visible ‚Äúhole‚Äù in your data.</p>
<p><strong>Statistical Interpretation:</strong> - This represents the <strong>biased estimate</strong> you would produce from the incomplete sample - Critical information in the ‚ÄúS‚Äù region is missing - Any analysis based on this sample would produce incorrect conclusions - The estimate doesn‚Äôt represent the full population, only the non-excluded portion</p>
<p><strong>The Consequences:</strong> - <strong>Incorrect Inferences</strong>: Conclusions drawn from this sample won‚Äôt apply to the full population - <strong>Invalidated Studies</strong>: Research based on biased samples may be fundamentally flawed - <strong>Misleading Policy</strong>: Decisions based on biased data can have serious real-world consequences - <strong>Wasted Resources</strong>: Time and money spent on analysis that can‚Äôt be trusted</p>
<p><strong>Why It Matters:</strong> This panel makes the consequences of selection bias visible. You can literally see what information is missing, making it clear why biased samples lead to wrong conclusions.</p>
</section>
</section>
<section id="why-selection-bias-matters-in-real-statistics" class="level3">
<h3 class="anchored" data-anchor-id="why-selection-bias-matters-in-real-statistics">Why Selection Bias Matters in Real Statistics</h3>
<p><strong>Selection bias</strong> is one of the most common and dangerous problems in data analysis. It occurs when the process of selecting observations for your sample is not random, leading to a sample that doesn‚Äôt accurately represent the population of interest.</p>
<section id="real-world-examples" class="level4">
<h4 class="anchored" data-anchor-id="real-world-examples">Real-World Examples</h4>
<p><strong>Medical Research:</strong> - <strong>Problem</strong>: A clinical trial only includes patients who can travel to a research center - <strong>Bias</strong>: Geographic selection bias‚Äîrural populations are excluded - <strong>Consequence</strong>: Treatment effectiveness may be overestimated if rural patients respond differently - <strong>Solution</strong>: Use multiple research sites or mobile clinics to include diverse populations</p>
<p><strong>Survey Research:</strong> - <strong>Problem</strong>: An online survey excludes people without internet access - <strong>Bias</strong>: Demographic selection bias‚Äîlower-income and older populations underrepresented - <strong>Consequence</strong>: Survey results don‚Äôt reflect the views of the entire population - <strong>Solution</strong>: Use mixed methods (online + phone + in-person) to reach all demographics</p>
<p><strong>Historical Data Analysis:</strong> - <strong>Problem</strong>: Historical records from certain time periods are missing or incomplete - <strong>Bias</strong>: Temporal selection bias‚Äîcertain eras are underrepresented - <strong>Consequence</strong>: Historical trends may be misinterpreted - <strong>Solution</strong>: Acknowledge gaps and use multiple data sources to fill them</p>
<p><strong>Social Media Research:</strong> - <strong>Problem</strong>: Analysis based only on Twitter data excludes non-users - <strong>Bias</strong>: Platform selection bias‚Äîcertain demographics and viewpoints missing - <strong>Consequence</strong>: Public opinion may be misrepresented - <strong>Solution</strong>: Combine multiple data sources and acknowledge platform limitations</p>
</section>
<section id="the-statistical-impact" class="level4">
<h4 class="anchored" data-anchor-id="the-statistical-impact">The Statistical Impact</h4>
<p>When selection bias occurs, several critical problems emerge:</p>
<ol type="1">
<li><strong>Parameter Estimation Error</strong>: Your sample statistics don‚Äôt accurately estimate population parameters</li>
<li><strong>Invalid Generalizations</strong>: Conclusions drawn from the sample don‚Äôt apply to the population</li>
<li><strong>Confounded Relationships</strong>: Observed associations may be due to the selection mechanism, not true relationships</li>
<li><strong>Reduced External Validity</strong>: Results can‚Äôt be generalized beyond the specific sample</li>
</ol>
<p><strong>The Key Insight:</strong> When selection bias occurs, your sample (the stippled dots) doesn‚Äôt match your population of interest (the original image). The missing data in the ‚ÄúS‚Äù shape creates a <strong>distorted view of reality</strong>, just like how biased sampling in research can lead to incorrect statistical conclusions, invalidated studies, and misleading policy decisions.</p>
</section>
</section>
<section id="the-visual-metaphor-as-a-learning-tool" class="level3">
<h3 class="anchored" data-anchor-id="the-visual-metaphor-as-a-learning-tool">The Visual Metaphor as a Learning Tool</h3>
<p>This visualization serves as a <strong>mental anchor</strong>‚Äîa cognitive tool that helps you recognize and address selection bias throughout your career. The visual metaphor creates strong mental associations that make the concept easier to remember and apply.</p>
<p><strong>The Critical Question:</strong> Whenever you encounter data analysis, ask yourself: <strong>‚ÄúDoes my sample match my population of interest?‚Äù</strong></p>
<p><strong>How to Use This Visualization:</strong></p>
<ol type="1">
<li><strong>Recognition</strong>: If your sample systematically excludes certain groups or regions (like the ‚ÄúS‚Äù excludes data points), you have selection bias</li>
<li><strong>Assessment</strong>: Compare your sample to your target population‚Äîare there visible gaps?</li>
<li><strong>Mitigation</strong>: If bias exists, acknowledge it, adjust your methods, or limit your conclusions</li>
<li><strong>Communication</strong>: Use the visual metaphor to explain the problem to others</li>
</ol>
<p><strong>The Power of Visual Learning:</strong> - The ‚ÄúS‚Äù shape makes the bias <strong>visible</strong>‚Äîyou can literally see what‚Äôs missing - This visual representation is more memorable than abstract descriptions - The metaphor helps you recognize similar patterns in real-world data - It provides a framework for discussing bias with non-statisticians</p>
<p>This visualization will stick with you, making it easier to recognize and address selection bias in real-world data analysis throughout your career. The combination of visual memory and conceptual understanding creates a powerful tool for maintaining statistical rigor in your work.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>